
# üèõÔ∏è –ö–∞—Ä—Ç–∞ –∂–∏—Ç–µ–ª—è –†–µ—Å–ø—É–±–ª–∏–∫–∏ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω API

> –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –∂–∏—Ç–µ–ª–µ–π –†–µ—Å–ø—É–±–ª–∏–∫–∏ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

[![Go Version](https://img.shields.io/badge/Go-1.21+-blue.svg)](https://golang.org/)¬†![Microservices](https://img.shields.io/badge/Architecture-Microservices-green.svg)¬†[![API Status](https://img.shields.io/badge/API-Active-green.svg)](https://tatarstan-card.ru/api)¬†[![Documentation](https://img.shields.io/badge/docs-Swagger-orange.svg)](https://tatarstan-card.ru/api/docs/swagger)

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –∂–∏—Ç–µ–ª–µ–π –†–µ—Å–ø—É–±–ª–∏–∫–∏ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω, –≤–∫–ª—é—á–∞—é—â–∞—è:

ü§ñ¬†**–ß–∞—Ç-–±–æ—Ç –ø–æ–º–æ—â–Ω–∏–∫**¬†- –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –Ω–∞ –±–∞–∑–µ Yandex LLM  
üó∫Ô∏è¬†**–ü–æ–∏—Å–∫ –º–µ—Å—Ç**¬†- —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –º–µ—Å—Ç –¥–ª—è –ø–æ—Å–µ—â–µ–Ω–∏—è  
üë§¬†**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**¬†- –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏  
üó≥Ô∏è¬†**–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è**¬†- —É—á–∞—Å—Ç–∏–µ –≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è—Ö –∑–∞ —Ä–µ—Å–ø—É–±–ª–∏–∫–∞–Ω—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã  
üíù¬†**–ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**¬†- —Å–∏—Å—Ç–µ–º–∞ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–±–æ—Ä–æ–≤ –∏ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–π

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**¬†—Å Clean Architecture –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏
- **API Gateway**¬†–Ω–∞ –±–∞–∑–µ Chi Router
- **gRPC**¬†–¥–ª—è –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- **WebSocket**¬†–¥–ª—è real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

- **PostgreSQL**¬†—Å pgxpool –¥–ª—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **MongoDB**¬†–¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Redis**¬†–¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–µ—Å—Å–∏–π
- **ClickHouse**¬†–¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **S3**¬†–¥–ª—è —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- **Prometheus**¬†–¥–ª—è –º–µ—Ç—Ä–∏–∫

### –û—á–µ—Ä–µ–¥–∏ –∏ –æ–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

- **Apache Kafka**¬†–¥–ª—è event streaming
- **RabbitMQ**¬†–¥–ª—è message queuing
- **Vector**¬†–¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–µ—Ç—Ä–∏–∫
### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

- **Yandex LLM**¬†–¥–ª—è AI-—Ñ—É–Ω–∫—Ü–∏–π —á–∞—Ç-–±–æ—Ç–∞
- **GoMail**¬†–¥–ª—è email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **Zerolog**¬†–¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **Viper**¬†–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤

![Architecture](./architecture.png)

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –∏ –ª–æ–≥–æ–≤

![Architecture](./architecture_metrics_and_logs.png)

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- **API Gateway**¬†- –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- **Auth Service**¬†- —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **Places Service**¬†- –ø–æ–∏—Å–∫ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –º–µ—Å—Ç –¥–ª—è –ø–æ—Å–µ—â–µ–Ω–∏—è
- **Chat Service**¬†- AI —á–∞—Ç-–±–æ—Ç —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Yandex LLM
- **Voting Service**¬†- —Å–∏—Å—Ç–µ–º–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π –∑–∞ —Ä–µ—Å–ø—É–±–ª–∏–∫–∞–Ω—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã
- **Charity Service**¬†- —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å–±–æ—Ä–∞–º–∏
- **Notification Service**¬†- –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ email

## üåê API Endpoints

**Backend URL:**¬†`https://tatarstan-card.ru/api/...`

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

|–¢–∏–ø|URL|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|---|
|**Stoplight**|[üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://kdt.stoplight.io/docs/kdt/vdycsik1ycmlf-karta-zhitelya-respubliki-tatarstan-api)|–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API|
|**Swagger**|[üîß Swagger UI](https://tatarstan-card.ru/api/docs/swagger)|–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints|
|**ReDoc**|[üìë ReDoc](https://tatarstan-card.ru/api/docs/redoc)|–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏|

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.21 –∏–ª–∏ –≤—ã—à–µ
- Docker –∏ Docker Compose
- –î–æ—Å—Ç—É–ø –∫ Container Registry

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
–ü–µ—Ä–µ–¥ —ç—Ç–∏–º —É–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.
–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å config –∏ –¥–æ–±–∞–≤–∏—Ç—å env.
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω—É–∂–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/GP-Hacks/gateway-service
cd gateway-service

# –ó–∞–ø—É—Å–∫ deploy —Å–∫—Ä–∏–ø—Ç–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
./scripts/deploy.sh "ENVIRONMENT" "YC_REGISTY/YC_REGISTRY_ID/IMAGE_NAME:IMAGE_TG" "CONTAINER_NAME" "PORT" "YC_OAUTH_TOKEN" 
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ —Ñ–∞–π–ª–∞—Ö¬†`config.go`¬†–∫–∞–∂–¥–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
go test ./...

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
go test -cover ./...

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å Docker
docker-compose -f docker-compose.test.yml up --abort-on-container-exit
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

1. **Container Registry**¬†- Docker –æ–±—Ä–∞–∑—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ä–µ–µ—Å—Ç—Ä–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
2. **Lockbox**¬†- –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏
3. **Docker Compose**¬†- –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
GP-Hacks/
‚îú‚îÄ‚îÄ gateway-service/          # API Gateway
‚îú‚îÄ‚îÄ auth-service/            # –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ places-service/          # –°–µ—Ä–≤–∏—Å –º–µ—Å—Ç
‚îú‚îÄ‚îÄ chat-service/            # –ß–∞—Ç-–±–æ—Ç —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ voting-service/          # –°–µ—Ä–≤–∏—Å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π
‚îú‚îÄ‚îÄ charity-service/         # –ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å
‚îî‚îÄ‚îÄ notification-service/    # –°–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. –°–æ–∑–¥–∞–π—Ç–µ fork –Ω—É–∂–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏–∑¬†[GP-Hacks](https://github.com/GP-Hacks)
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (`git checkout -b feature/AmazingFeature`)
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ç–∫—É (`git push origin feature/AmazingFeature`)
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **GitHub:**¬†[GP-Hacks](https://github.com/GP-Hacks)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**¬†[Stoplight](https://kdt.stoplight.io/docs/kdt/vdycsik1ycmlf-karta-zhitelya-respubliki-tatarstan-api)
- **API:**¬†[Swagger](https://tatarstan-card.ru/api/docs/swagger)

---

<div align="center">

**üèõÔ∏è –°–¥–µ–ª–∞–Ω–æ –¥–ª—è –∂–∏—Ç–µ–ª–µ–π –†–µ—Å–ø—É–±–ª–∏–∫–∏ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω**

_–û–±—ä–µ–¥–∏–Ω—è–µ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏_

</div>
